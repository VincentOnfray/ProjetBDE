CREATE PROCEDURE `newEvent`(IN `Title` VARCHAR(255), IN `Description` VARCHAR(255), IN `Date` DATE, IN `Recurrence` VARCHAR(255), IN `Prix` INT(255), IN `Image` INT(255)) NOT DETERMINISTIC NO SQL SQL SECURITY DEFINER 
INSERT INTO evenement(`titre`,`Description`,`Date`,`Recurrence`,`prix`,`IDimage`)
 VALUES (Title,Description,Date,Recurrence,Prix,Image); 

CREATE PROCEDURE `newImage`(IN `name` VARCHAR(255), IN `IDcreateur` INT(255), IN `IDevent` INT(10)) 
NOT DETERMINISTIC NO SQL SQL SECURITY DEFINER
 INSERT into image(`image`,`IDCreateur`,`IDEvenement`) VALUES (name,IDcreateur,IDevent);

CREATE PROCEDURE `newComment`(IN `content` VARCHAR(255), IN `IDuser` INT(255), IN `IDimage` INT(10)) 
NOT DETERMINISTIC NO SQL SQL SECURITY DEFINER
 INSERT into commentaire(`Contenu`,`IDImage`,`IDCreateur`) VALUES (content,IDimage,IDuser);


CREATE PROCEDURE `getlastImage`() 
NOT DETERMINISTIC NO SQL SQL SECURITY DEFINER
SELECT * FROM image ORDER BY `id` DESC LIMIT 1;

CREATE PROCEDURE `getImages`(IN `IDevent`INT(10)) 
NOT DETERMINISTIC NO SQL SQL SECURITY DEFINER
SELECT * FROM image where IDEvenement = IDevent ;


CREATE PROCEDURE `getComments`(IN `IDimage` INT(10)) 
NOT DETERMINISTIC NO SQL SQL SECURITY DEFINER
SELECT * FROM commentaire where commentaire.`IDImage` = IDimage ;

CREATE PROCEDURE `newIdea`(IN `title` VARCHAR(255), IN `description` VARCHAR(255),IN `IDcreateur` INT(10),IN `IDimage` INT(10))
NOT DETERMINISTIC NO SQL SQL SECURITY DEFINER
 INSERT into proposition(`titre`,`description`,`IDutilisateur`,`IDImage`) VALUES (title,description,IDcreateur,IDimage);


CREATE PROCEDURE `getImage`(IN `IDimage` int(10)) 
NOT DETERMINISTIC NO SQL SQL SECURITY DEFINER
 SELECT * FROM image WHERE `id`= IDimage ;


CREATE PROCEDURE `deleteIdea`(IN `IDidea` int(10)) 
NOT DETERMINISTIC NO SQL SQL SECURITY DEFINER
 DELETE FROM proposition WHERE `id`= IDidea ;

CREATE PROCEDURE `deleteImage`(IN `IDImage` int(10)) 
NOT DETERMINISTIC NO SQL SQL SECURITY DEFINER
 DELETE FROM image WHERE `id`= IDImage ;

CREATE PROCEDURE `deleteComment`(IN `IDComment` int(10)) 
NOT DETERMINISTIC NO SQL SQL SECURITY DEFINER
 DELETE FROM commentaire WHERE `id`= IDComment;

CREATE PROCEDURE `deleteArticle`(IN `IDarticle` int(10)) 
NOT DETERMINISTIC NO SQL SQL SECURITY DEFINER
 DELETE FROM article WHERE `id`= IDarticle;



CREATE PROCEDURE `getEvent`(IN `IDevent` int(10)) 
NOT DETERMINISTIC NO SQL SQL SECURITY DEFINER
 SELECT * FROM event WHERE `id`= IDevent ;



CREATE PROCEDURE `deleteEvent`(IN `IDevent` int(10)) 
NOT DETERMINISTIC NO SQL SQL SECURITY DEFINER
DELETE FROM evenement WHERE `id`= IDevent ;


CREATE PROCEDURE `checkSupport`(IN `IDidea` INT(10), IN `IDuser` int(10)) 
NOT DETERMINISTIC NO SQL SQL SECURITY DEFINER
SELECT * FROM supporte
WHERE `idproposition`= IDidea 
AND `idutilisateur`=IDuser;


CREATE PROCEDURE `checkLike`(IN `IDimage` INT(10), IN `IDuser` int(10)) 
NOT DETERMINISTIC NO SQL SQL SECURITY DEFINER
SELECT * FROM `like`
WHERE `like`.`idimage`= IDimage 
AND `like`.`idutilisateur`=IDuser;

CREATE PROCEDURE `checkCart`(IN `IDarticle` INT(10), IN `IDuser` int(10)) 
NOT DETERMINISTIC NO SQL SQL SECURITY DEFINER
SELECT * FROM `commande`
WHERE `idarticle`= IDarticle 
AND `idutilisateur`=IDuser
AND `status`= 'panier' ;

CREATE PROCEDURE `addToCart`(IN `IDarticle` INT(10), IN `IDuser` INT(10)) 
NOT DETERMINISTIC NO SQL SQL SECURITY DEFINER
INSERT INTO commande(`idarticle`,`idutilisateur`) VALUES (IDarticle,IDuser);



CREATE PROCEDURE `checkInsc`(IN `IDevent` INT(10), IN `IDuser` int(10)) 
NOT DETERMINISTIC NO SQL SQL SECURITY DEFINER
SELECT * FROM inscription
WHERE `idEvenement`= IDevent 
AND `idinscrit`=IDuser;


CREATE PROCEDURE `signUp`(IN `IDevent`INT(10), IN `IDuser` INT(10)) 
NOT DETERMINISTIC NO SQL SQL SECURITY DEFINER
INSERT INTO inscription(`idinscrit`,`idEvenement`) VALUES (IDuser,IDevent);


/* */
CREATE PROCEDURE `support`(IN `IDidea`INT(10)) 
NOT DETERMINISTIC NO SQL SQL SECURITY DEFINER
UPDATE proposition 
  SET  `likes` = `likes` + 1 
  WHERE `id` = IDidea;

CREATE PROCEDURE `supported`(IN `IDidea` INT(10), IN `IDuser` INT(10)) 
NOT DETERMINISTIC NO SQL SQL SECURITY DEFINER
INSERT INTO supporte(`idutilisateur`,`idproposition`) VALUES (IDuser,IDidea);

CREATE PROCEDURE `liked`(IN `IDimage` INT(10), IN `IDuser` INT(10)) 
NOT DETERMINISTIC NO SQL SQL SECURITY DEFINER
INSERT INTO `like`(`idutilisateur`,`idimage`) VALUES (IDuser,IDimage);

CREATE PROCEDURE `like`(IN `IDimage`INT(10)) 
NOT DETERMINISTIC NO SQL SQL SECURITY DEFINER
UPDATE image
  SET  `likes` = `likes` + 1 
  WHERE `id` = IDimage;

CREATE PROCEDURE `getshop`(IN cate VARCHAR(255)) 
NOT DETERMINISTIC NO SQL SQL SECURITY DEFINER
SELECT * FROM article where `Catégorie`=cate; 


CREATE PROCEDURE `newItem`(IN `name` VARCHAR(255), IN `description` VARCHAR(255), IN `price` INT(100), IN `category` VARCHAR(20), IN `image` VARCHAR(20))
NOT DETERMINISTIC NO SQL SQL SECURITY DEFINER
 INSERT into Article(`nom`,`Description`,`Prix`,`Catégorie`,`Image`) VALUES (name,description,price,category,image);




